#summary Communication avec le serveur de Coco.fr

= Communication avec le serveur =

Le code !JavaScript communique avec le serveur en exécutant des requêtes HTTP avec la méthode GET sur une adresse IP et un port donné. 

Il existe deux types de requêtes :
  * La requête initiale lancée avant toutes les autres.
  * Les autres requêtes.

== Les autres requêtes ==

Le second type de requête est constitué ainsi :
{{{ http:// adresseIP : myport / code  mynickID monpass params}}}

  * *adresseIP* : toujours l'adresse IP « 87.98.168.29 ».
  * *myport*    : un numéro de port TCP compris entre 3 000 et 4 000 .
  * *code*      : un code numérique identifié la commande, comme par exemple 10, 89, 48, ...
  * *mynickID*  : l'identificateur numérique unique du pseudonyme pour la session en cours.
  * *monpass*   : le mot de passe de la session en cours.
  * *params*    : les éventuelles paramètres. 

Exemple d'une requête :
{{{ http://87.98.168.29:80/10327709RObSoa00 }}}
 * *adresseIP* : 87.98.168.29
 * *myport*    : 80
 * *code*      : 10 
 * *mynickID*  : 10327709 
 * *monpass*   : RObSoa
 * *params*    : 00 

Cette requête recherche et retourne la liste des pseudonymes. Le code « 10 » demande la recherche des pseudonymes.  Les paramètres sont les deux valeurs numériques collées des variables *genru* et *yearu*.


== Les codes de retour ==

  * 12 : réponse à une commande  « 40 », première authentification avec l'identifiant de l'avatar et le mot de passe réussie.
  * 99555 : information sur un pseudonyme utilisé en pressant le bouton « ? ». Réservé à un abonnement Premium.
  * 99556 : réponse à une commande  « 51 », deuxième authentification avec l'identifiant et le mot de passe de la session réussie.
  * 34 : réponse à une commande « 10 », retourne la liste des pseudos
  * 89 : réponse à une commande « 89 », retourne la liste des salons
  * 48 : réponse à une commande « 48 », retourne la liste des « amiz », c'est à dire les pseudonymes de la liste de contacts.