#summary Communication avec le serveur de Coco.fr

= Communication avec le serveur =

Le code !JavaScript communique avec le serveur en exécutant des requêtes HTTP avec la méthode GET sur une adresse IP et un port donné. 

Il existe deux types de requêtes :
  * La requête initiale lancée avant toutes les autres.
  * Les autres requêtes.

= La requête initiale =

La requête initiale est la toute première requête lancée. 

Syntaxe de la requête : *40* + *mynickname* + *`*`* + *myage* + *mysex* + *mycityID*  + *myavatar* + *speco* + *mypass* 

  * La valeur *speco* est toujours initialisée à zéro.
  * *myavatar* : Identifiant unique de l'utilisateur de neuf chiffres décimaux 
  * *mypass* : Mot de passe de vingt caractères alphabets associé à l'identifiant unique de l'utilisateur. À la première connexion le mot de passe n'existe pas encore, la chaîne de caractères est vide.

Exemple d'une requête :
{{{
http://46.105.32.143:80/40Simon*371309328813008330?7619933.453716727
}}}

Qui retourne :
{{{
process1(#12183616UpzIoL11537742395958620*FR)
}}}


== Les autres requêtes ==

Le second type de requête est constitué ainsi :
{{{ http:// adresseIP : myport / code  mynickID monpass params}}}

  * *adresseIP* : toujours l'adresse IP « 46.105.32.143 ».
  * *myport*    : un numéro de port TCP toujours 80. 
  * *code*      : un code numérique identifié la commande, comme par exemple 10, 89, 48, ...
  * *mynickID*  : l'identificateur numérique unique du pseudonyme pour la session en cours.
  * *monpass*   : le mot de passe de la session en cours.
  * *params*    : les éventuelles paramètres. 

Exemple d'une requête :
{{{ http://46.105.32.143:80/10327709RObSoa00 }}}
 * *adresseIP* : 46.105.32.143
 * *myport*    : 80
 * *code*      : 10 
 * *mynickID*  : 10327709 
 * *monpass*   : RObSoa
 * *params*    : 00 

Cette requête recherche et retourne la liste des pseudonymes. Le code « 10 » demande la recherche des pseudonymes.  Les paramètres sont les deux valeurs numériques collées des variables *genru* et *yearu*.

=== Liste des requêtes connues ===

===== Requêtes 83 : Retourne informations sur un code vote =====
Syntaxe de la requête : *83* + *mynickID* + *monpass* + *33000000* + *code*

Retour de la requête : *99* + *557* + *mynickID* + *myage* + *mysex* + *mynickname*

Exemple de requête qui demande des informations sur le code vote « MYY »:
{{{
http://46.105.32.143:80/83201207hwZTEQ733000000MYY
}}}
Qui retourne :
{{{
process1('#9955718252999309297Laws'); 
}}}

 * *mynickname* : Laws
 * *myage*      : 99 (99 ans signifie que l'utilisateur n'est plus connecté actuellement.)
 * *mynickID*   : 182529 (ID de la session en cours ou de la dernière session.)
 * *citydio*    : 30929 (code pour le code postal 75015)
 * *mysex*      : 7 (pseudo femme avec avatar)






== Les codes de retour ==

  * 12 : réponse à une commande  « 40 », première authentification avec l'identifiant de l'avatar et le mot de passe réussie.
  * 99555 : information sur un pseudonyme utilisé en pressant le bouton « ? ». Réservé à un abonnement Premium.
  * 99556 : réponse à une commande  « 51 », deuxième authentification avec l'identifiant et le mot de passe de la session réussie.
  * 34 : réponse à une commande « 10 », retourne la liste des pseudos
  * 89 : réponse à une commande « 89 », retourne la liste des salons
  * 48 : réponse à une commande « 48 », retourne la liste des « amiz », c'est à dire les pseudonymes de la liste de contacts.